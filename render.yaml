# ==========================================
# Render Blueprint - Configuración de Despliegue
# https://render.com/docs/blueprint-spec
# ==========================================

services:
  # Servicio Web - Spring Boot API
  - type: web
    name: lexisware-portafolio-api
    runtime: docker
    region: oregon
    plan: free
    
    # Dockerfile en la raíz del proyecto
    dockerfilePath: ./Dockerfile
    dockerContext: .
    
    # Health Check
    healthCheckPath: /actuator/health
    
    # Variables de entorno (configurar en el Dashboard de Render)
    envVars:
      # Puerto (Render lo asigna automáticamente)
      - key: PORT
        value: "8080"
      
      # Base de datos PostgreSQL
      - key: DB_URL
        sync: false
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false
      
      # JWT Secret (IMPORTANTE: Generar uno seguro)
      - key: JWT_SECRET
        generateValue: true
      
      # Configuración de JPA para producción
      - key: JPA_DDL_AUTO
        value: "validate"
      - key: SHOW_SQL
        value: "false"
      - key: FORMAT_SQL
        value: "false"
      
      # Email SMTP
      - key: MAIL_USERNAME
        sync: false
      - key: MAIL_PASSWORD
        sync: false
      - key: MAIL_FROM
        sync: false
      
      # CORS - URLs permitidas
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      
      # Cloudinary
      - key: CLOUDINARY_CLOUD_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
      
      # Logging
      - key: LOG_LEVEL
        value: "INFO"
      
      # Swagger (desactivar en producción si no se necesita)
      - key: SWAGGER_ENABLED
        value: "true"
      
      # Perfil de Spring activo
      - key: SPRING_PROFILES_ACTIVE
        value: "prod"
